{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useNavigate}from'react-router-dom';import axios from'axios';import{Container,Typography,Paper,List,ListItem,ListItemText,ListItemSecondaryAction,IconButton,Divider,Button,CircularProgress,Alert}from'@mui/material';import ChevronRightIcon from'@mui/icons-material/ChevronRight';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const HistoryPage=()=>{const navigate=useNavigate();const[history,setHistory]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState('');useEffect(()=>{const fetchHistory=async()=>{try{const response=await axios.get('/api/history');setHistory(response.data);}catch(err){setError('Failed to load history. Please try again.');console.error(err);}finally{setLoading(false);}};fetchHistory();},[]);const formatDate=dateString=>{try{return new Date(dateString).toLocaleString();}catch(error){return dateString;}};const getSummary=entry=>{const{fitness_data,analysis_results}=entry;let summary='';if(fitness_data.steps){summary+=\"\".concat(fitness_data.steps,\" steps\");}if(fitness_data.calories||fitness_data.total_calories){summary+=summary?', ':'';summary+=\"\".concat(fitness_data.calories||fitness_data.total_calories,\" calories\");}if(analysis_results.activity_level){summary+=summary?' • ':'';summary+=\"\".concat(analysis_results.activity_level);}return summary||'No summary available';};const viewEntry=id=>{navigate(\"/dashboard/\".concat(id));};if(loading){return/*#__PURE__*/_jsxs(Container,{maxWidth:\"md\",sx:{textAlign:'center',py:8},children:[/*#__PURE__*/_jsx(CircularProgress,{}),/*#__PURE__*/_jsx(Typography,{variant:\"h6\",sx:{mt:2},children:\"Loading your history...\"})]});}return/*#__PURE__*/_jsxs(Container,{maxWidth:\"md\",children:[/*#__PURE__*/_jsx(Typography,{variant:\"h4\",component:\"h1\",gutterBottom:true,align:\"center\",children:\"Your Analysis History\"}),error&&/*#__PURE__*/_jsx(Alert,{severity:\"error\",sx:{mb:3},children:error}),history.length===0?/*#__PURE__*/_jsxs(Paper,{sx:{p:4,textAlign:'center'},children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",gutterBottom:true,children:\"No history available yet\"}),/*#__PURE__*/_jsx(Typography,{variant:\"body1\",paragraph:true,children:\"Start analyzing your fitness data to build your history.\"}),/*#__PURE__*/_jsx(Button,{variant:\"contained\",color:\"primary\",onClick:()=>navigate('/upload'),children:\"Upload Fitness Data\"})]}):/*#__PURE__*/_jsx(Paper,{children:/*#__PURE__*/_jsx(List,{children:history.slice().reverse().map((entry,index)=>/*#__PURE__*/_jsxs(React.Fragment,{children:[/*#__PURE__*/_jsxs(ListItem,{button:true,onClick:()=>viewEntry(entry.id),children:[/*#__PURE__*/_jsx(ListItemText,{primary:formatDate(entry.date),secondary:getSummary(entry)}),/*#__PURE__*/_jsx(ListItemSecondaryAction,{children:/*#__PURE__*/_jsx(IconButton,{edge:\"end\",onClick:()=>viewEntry(entry.id),children:/*#__PURE__*/_jsx(ChevronRightIcon,{})})})]}),index<history.length-1&&/*#__PURE__*/_jsx(Divider,{})]},entry.id))})})]});};export default HistoryPage;","map":{"version":3,"names":["React","useState","useEffect","useNavigate","axios","Container","Typography","Paper","List","ListItem","ListItemText","ListItemSecondaryAction","IconButton","Divider","Button","CircularProgress","Alert","ChevronRightIcon","jsx","_jsx","jsxs","_jsxs","HistoryPage","navigate","history","setHistory","loading","setLoading","error","setError","fetchHistory","response","get","data","err","console","formatDate","dateString","Date","toLocaleString","getSummary","entry","fitness_data","analysis_results","summary","steps","concat","calories","total_calories","activity_level","viewEntry","id","maxWidth","sx","textAlign","py","children","variant","mt","component","gutterBottom","align","severity","mb","length","p","paragraph","color","onClick","slice","reverse","map","index","Fragment","button","primary","date","secondary","edge"],"sources":["C:/Users/Nitish Maurya/Desktop/frontend/src/pages/HistoryPage.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport axios from 'axios';\nimport { \n  Container, \n  Typography, \n  Paper,\n  List, \n  ListItem, \n  ListItemText, \n  ListItemSecondaryAction, \n  IconButton, \n  Divider, \n  Button,\n  CircularProgress,\n  Alert\n} from '@mui/material';\nimport ChevronRightIcon from '@mui/icons-material/ChevronRight';\n\nconst HistoryPage = () => {\n  const navigate = useNavigate();\n  const [history, setHistory] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState('');\n\n  useEffect(() => {\n    const fetchHistory = async () => {\n      try {\n        const response = await axios.get('/api/history');\n        setHistory(response.data);\n      } catch (err) {\n        setError('Failed to load history. Please try again.');\n        console.error(err);\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    fetchHistory();\n  }, []);\n\n  const formatDate = (dateString) => {\n    try {\n      return new Date(dateString).toLocaleString();\n    } catch (error) {\n      return dateString;\n    }\n  };\n\n  const getSummary = (entry) => {\n    const { fitness_data, analysis_results } = entry;\n    let summary = '';\n    \n    if (fitness_data.steps) {\n      summary += `${fitness_data.steps} steps`;\n    }\n    \n    if (fitness_data.calories || fitness_data.total_calories) {\n      summary += summary ? ', ' : '';\n      summary += `${fitness_data.calories || fitness_data.total_calories} calories`;\n    }\n    \n    if (analysis_results.activity_level) {\n      summary += summary ? ' • ' : '';\n      summary += `${analysis_results.activity_level}`;\n    }\n    \n    return summary || 'No summary available';\n  };\n\n  const viewEntry = (id) => {\n    navigate(`/dashboard/${id}`);\n  };\n\n  if (loading) {\n    return (\n      <Container maxWidth=\"md\" sx={{ textAlign: 'center', py: 8 }}>\n        <CircularProgress />\n        <Typography variant=\"h6\" sx={{ mt: 2 }}>Loading your history...</Typography>\n      </Container>\n    );\n  }\n\n  return (\n    <Container maxWidth=\"md\">\n      <Typography variant=\"h4\" component=\"h1\" gutterBottom align=\"center\">\n        Your Analysis History\n      </Typography>\n      \n      {error && (\n        <Alert severity=\"error\" sx={{ mb: 3 }}>{error}</Alert>\n      )}\n      \n      {history.length === 0 ? (\n        <Paper sx={{ p: 4, textAlign: 'center' }}>\n          <Typography variant=\"h6\" gutterBottom>No history available yet</Typography>\n          <Typography variant=\"body1\" paragraph>\n            Start analyzing your fitness data to build your history.\n          </Typography>\n          <Button \n            variant=\"contained\" \n            color=\"primary\"\n            onClick={() => navigate('/upload')}\n          >\n            Upload Fitness Data\n          </Button>\n        </Paper>\n      ) : (\n        <Paper>\n          <List>\n            {history.slice().reverse().map((entry, index) => (\n              <React.Fragment key={entry.id}>\n                <ListItem button onClick={() => viewEntry(entry.id)}>\n                  <ListItemText \n                    primary={formatDate(entry.date)}\n                    secondary={getSummary(entry)}\n                  />\n                  <ListItemSecondaryAction>\n                    <IconButton edge=\"end\" onClick={() => viewEntry(entry.id)}>\n                      <ChevronRightIcon />\n                    </IconButton>\n                  </ListItemSecondaryAction>\n                </ListItem>\n                {index < history.length - 1 && <Divider />}\n              </React.Fragment>\n            ))}\n          </List>\n        </Paper>\n      )}\n    </Container>\n  );\n};\n\n\nexport default HistoryPage;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}