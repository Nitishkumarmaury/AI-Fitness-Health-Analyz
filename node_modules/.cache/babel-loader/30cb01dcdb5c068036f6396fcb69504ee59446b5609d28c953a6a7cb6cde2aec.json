{"ast":null,"code":"import React,{createContext,useState,useContext,useEffect}from'react';import{getHistory,getMetricsSummary}from'../utils/api';// Create context\nimport{jsx as _jsx}from\"react/jsx-runtime\";const AppContext=/*#__PURE__*/createContext();// Context provider component\nexport const AppProvider=_ref=>{let{children}=_ref;const[history,setHistory]=useState([]);const[metrics,setMetrics]=useState(null);const[loading,setLoading]=useState(false);const[error,setError]=useState(null);const[lastRefresh,setLastRefresh]=useState(null);// Load history from API\nconst loadHistory=async()=>{setLoading(true);setError(null);try{const data=await getHistory();setHistory(data);setLastRefresh(new Date());}catch(err){setError(err.toString());console.error('Error loading history:',err);}finally{setLoading(false);}};// Load metrics summary\nconst loadMetrics=async()=>{try{const data=await getMetricsSummary();setMetrics(data);}catch(err){console.error('Error loading metrics:',err);// Don't set error state here to avoid UI disruption\n}};// Refresh all data\nconst refreshData=async()=>{setLoading(true);try{await Promise.all([loadHistory(),loadMetrics()]);}finally{setLoading(false);}};// Load data on initial mount\nuseEffect(()=>{loadHistory();loadMetrics();},[]);// Create context value\nconst contextValue={history,metrics,loading,error,lastRefresh,refreshData,loadHistory,loadMetrics};return/*#__PURE__*/_jsx(AppContext.Provider,{value:contextValue,children:children});};// Custom hook for using the context\nexport const useAppContext=()=>useContext(AppContext);export default AppContext;","map":{"version":3,"names":["React","createContext","useState","useContext","useEffect","getHistory","getMetricsSummary","jsx","_jsx","AppContext","AppProvider","_ref","children","history","setHistory","metrics","setMetrics","loading","setLoading","error","setError","lastRefresh","setLastRefresh","loadHistory","data","Date","err","toString","console","loadMetrics","refreshData","Promise","all","contextValue","Provider","value","useAppContext"],"sources":["C:/Users/Nitish Maurya/Desktop/frontend/src/context/AppContext.js"],"sourcesContent":["import React, { createContext, useState, useContext, useEffect } from 'react';\nimport { getHistory, getMetricsSummary } from '../utils/api';\n\n// Create context\nconst AppContext = createContext();\n\n// Context provider component\nexport const AppProvider = ({ children }) => {\n  const [history, setHistory] = useState([]);\n  const [metrics, setMetrics] = useState(null);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n  const [lastRefresh, setLastRefresh] = useState(null);\n\n  // Load history from API\n  const loadHistory = async () => {\n    setLoading(true);\n    setError(null);\n    try {\n      const data = await getHistory();\n      setHistory(data);\n      setLastRefresh(new Date());\n    } catch (err) {\n      setError(err.toString());\n      console.error('Error loading history:', err);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Load metrics summary\n  const loadMetrics = async () => {\n    try {\n      const data = await getMetricsSummary();\n      setMetrics(data);\n    } catch (err) {\n      console.error('Error loading metrics:', err);\n      // Don't set error state here to avoid UI disruption\n    }\n  };\n\n  // Refresh all data\n  const refreshData = async () => {\n    setLoading(true);\n    try {\n      await Promise.all([loadHistory(), loadMetrics()]);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Load data on initial mount\n  useEffect(() => {\n    loadHistory();\n    loadMetrics();\n  }, []);\n\n  // Create context value\n  const contextValue = {\n    history,\n    metrics,\n    loading,\n    error,\n    lastRefresh,\n    refreshData,\n    loadHistory,\n    loadMetrics\n  };\n\n  return (\n    <AppContext.Provider value={contextValue}>\n      {children}\n    </AppContext.Provider>\n  );\n};\n\n// Custom hook for using the context\nexport const useAppContext = () => useContext(AppContext);\n\nexport default AppContext;\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,aAAa,CAAEC,QAAQ,CAAEC,UAAU,CAAEC,SAAS,KAAQ,OAAO,CAC7E,OAASC,UAAU,CAAEC,iBAAiB,KAAQ,cAAc,CAE5D;AAAA,OAAAC,GAAA,IAAAC,IAAA,yBACA,KAAM,CAAAC,UAAU,cAAGR,aAAa,CAAC,CAAC,CAElC;AACA,MAAO,MAAM,CAAAS,WAAW,CAAGC,IAAA,EAAkB,IAAjB,CAAEC,QAAS,CAAC,CAAAD,IAAA,CACtC,KAAM,CAACE,OAAO,CAAEC,UAAU,CAAC,CAAGZ,QAAQ,CAAC,EAAE,CAAC,CAC1C,KAAM,CAACa,OAAO,CAAEC,UAAU,CAAC,CAAGd,QAAQ,CAAC,IAAI,CAAC,CAC5C,KAAM,CAACe,OAAO,CAAEC,UAAU,CAAC,CAAGhB,QAAQ,CAAC,KAAK,CAAC,CAC7C,KAAM,CAACiB,KAAK,CAAEC,QAAQ,CAAC,CAAGlB,QAAQ,CAAC,IAAI,CAAC,CACxC,KAAM,CAACmB,WAAW,CAAEC,cAAc,CAAC,CAAGpB,QAAQ,CAAC,IAAI,CAAC,CAEpD;AACA,KAAM,CAAAqB,WAAW,CAAG,KAAAA,CAAA,GAAY,CAC9BL,UAAU,CAAC,IAAI,CAAC,CAChBE,QAAQ,CAAC,IAAI,CAAC,CACd,GAAI,CACF,KAAM,CAAAI,IAAI,CAAG,KAAM,CAAAnB,UAAU,CAAC,CAAC,CAC/BS,UAAU,CAACU,IAAI,CAAC,CAChBF,cAAc,CAAC,GAAI,CAAAG,IAAI,CAAC,CAAC,CAAC,CAC5B,CAAE,MAAOC,GAAG,CAAE,CACZN,QAAQ,CAACM,GAAG,CAACC,QAAQ,CAAC,CAAC,CAAC,CACxBC,OAAO,CAACT,KAAK,CAAC,wBAAwB,CAAEO,GAAG,CAAC,CAC9C,CAAC,OAAS,CACRR,UAAU,CAAC,KAAK,CAAC,CACnB,CACF,CAAC,CAED;AACA,KAAM,CAAAW,WAAW,CAAG,KAAAA,CAAA,GAAY,CAC9B,GAAI,CACF,KAAM,CAAAL,IAAI,CAAG,KAAM,CAAAlB,iBAAiB,CAAC,CAAC,CACtCU,UAAU,CAACQ,IAAI,CAAC,CAClB,CAAE,MAAOE,GAAG,CAAE,CACZE,OAAO,CAACT,KAAK,CAAC,wBAAwB,CAAEO,GAAG,CAAC,CAC5C;AACF,CACF,CAAC,CAED;AACA,KAAM,CAAAI,WAAW,CAAG,KAAAA,CAAA,GAAY,CAC9BZ,UAAU,CAAC,IAAI,CAAC,CAChB,GAAI,CACF,KAAM,CAAAa,OAAO,CAACC,GAAG,CAAC,CAACT,WAAW,CAAC,CAAC,CAAEM,WAAW,CAAC,CAAC,CAAC,CAAC,CACnD,CAAC,OAAS,CACRX,UAAU,CAAC,KAAK,CAAC,CACnB,CACF,CAAC,CAED;AACAd,SAAS,CAAC,IAAM,CACdmB,WAAW,CAAC,CAAC,CACbM,WAAW,CAAC,CAAC,CACf,CAAC,CAAE,EAAE,CAAC,CAEN;AACA,KAAM,CAAAI,YAAY,CAAG,CACnBpB,OAAO,CACPE,OAAO,CACPE,OAAO,CACPE,KAAK,CACLE,WAAW,CACXS,WAAW,CACXP,WAAW,CACXM,WACF,CAAC,CAED,mBACErB,IAAA,CAACC,UAAU,CAACyB,QAAQ,EAACC,KAAK,CAAEF,YAAa,CAAArB,QAAA,CACtCA,QAAQ,CACU,CAAC,CAE1B,CAAC,CAED;AACA,MAAO,MAAM,CAAAwB,aAAa,CAAGA,CAAA,GAAMjC,UAAU,CAACM,UAAU,CAAC,CAEzD,cAAe,CAAAA,UAAU","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}